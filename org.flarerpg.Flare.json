{
	"app-id": "org.flarerpg.Flare",
	"rename-desktop-file": "flare.desktop",
	"rename-icon": "flare",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "1.6",
	"sdk": "org.freedesktop.Sdk",
	"command": "flare.sh",
	"finish-args": [
		"--socket=wayland",
		"--socket=x11",
		"--share=ipc",
		"--socket=pulseaudio",
		"--device=dri"
	],
	"build-options": {
		"cflags": "-O2",
		"cxxflags": "-O2"
	},
	"cleanup": [
		"/app/games",
		"/lib/debug",
		"/share/man"
	],
	"modules": [
		{
			"name": "flare-engine",
			"buildsystem": "cmake-ninja",
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/clintbellanger/flare-engine/archive/v1.04.tar.gz",
					"sha256": "a62384433df872b85315febafdf876faac0fb415c94ed0e919eee04baa811001"
				}
			],
			"post-install": [
				"mkdir /app/bin",
				"mv /app/games/flare /app/bin",
				"for size in 16 24 32 48 64 128 256; do
					rsvg-convert -w $size -h $size -f png -o $size.png distribution/flare_logo.svg
					install -Dm644 $size.png /app/share/icons/hicolor/${size}x${size}/apps/org.flarerpg.Flare.png
				done"
			]
		},
		{
			"name": "flare-game",
			"buildsystem": "cmake-ninja",
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/clintbellanger/flare-game/archive/v1.04.tar.gz",
					"sha256": "4a4c52d5d6c8c3a1e21e1481ec23f50ec3079c39cff26ea467086baeaf0dd44b"
				}
			],
			"post-install": [
				"echo \"flare --mods=fantasycore,empyrean_campaign --data-path=/app/share/games/flare\" > /app/bin/flare.sh",
				"chmod +x /app/bin/flare.sh",
				"desktop-file-edit --set-key=Exec --set-value=flare.sh /app/share/applications/flare.desktop",
				"sed -i 's|org.flarerpg.Flare|org.flarerpg.Flare.desktop|g' /app/share/appdata/org.flarerpg.Flare.appdata.xml"
			]
		}
	]
}
